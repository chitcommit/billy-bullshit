name = "billy-bullshit"
main = "src/index.ts"
compatibility_date = "2024-01-01"
node_compat = true

# Account and zone settings (update with your Cloudflare account)
# account_id = "your-account-id"
# zone_id = "your-zone-id"

[env.production]
name = "billy-bullshit-prod"
routes = [
  { pattern = "billy.chitty.cc", custom_domain = true }
]

# KV namespaces for conversation history
# Provision before deploying:
#   wrangler kv:namespace create CONVERSATIONS
#   wrangler kv:namespace create CONVERSATIONS --preview
#   Then paste the namespace IDs below
[[kv_namespaces]]
binding = "CONVERSATIONS"
id = ""  # REQUIRED: run command above and paste ID here
preview_id = ""  # REQUIRED: run command above and paste ID here

# AI binding for Cloudflare Workers AI
[ai]
binding = "AI"

# Analytics Engine for tracking metrics
[[analytics_engine_datasets]]
binding = "ANALYTICS"

# Secrets (set via: wrangler secret put SECRET_NAME)
# - ANTHROPIC_API_KEY (for Claude API)
# - OPENAI_API_KEY (optional, for OpenAI fallback)

# Environment variables
[vars]
ENVIRONMENT = "development"
MAX_CONVERSATION_LENGTH = "20"
DEFAULT_MODEL = "@cf/meta/llama-3.1-8b-instruct"

[env.production.vars]
ENVIRONMENT = "production"
DEFAULT_MODEL = "@cf/meta/llama-3.1-8b-instruct"

# Limits
[limits]
cpu_ms = 50000

# Observability
[observability]
enabled = true
